# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö, –º–µ—Ç—Ä–∏–∫–∞—Ö –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (Reddit, TikTok, YouTube, VK, Instagram, Twitter, Discord).

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª `.env.local` —É–∂–µ —Å–æ–∑–¥–∞–Ω —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ Supabase. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç:

```env
SUPABASE_URL=https://owysigjwaciduiylwtfh.supabase.co
SUPABASE_ANON_KEY=your_anon_key_here
```

### –ì–¥–µ –Ω–∞–π—Ç–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ Supabase:

1. **SUPABASE_URL**: 
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≤ [Supabase Dashboard](https://app.supabase.com)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí API
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ "Project URL"

2. **SUPABASE_ANON_KEY**:
   - –í —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ Settings ‚Üí API
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ "anon public" –∫–ª—é—á

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

### 1. `events` - –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–±—ã—Ç–∏–π

–•—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º:

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `event_id` (string) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–æ–±—ã—Ç–∏—è
- `event_timestamp` (timestamp) - –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è
- `platform` (string) - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞: `reddit`, `tiktok`, `youtube`, `vk`, `instagram`, `twitter`, `discord`
- `event_type` (string) - —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è:
  - `reddit_post`, `reddit_comment`
  - `video_mention` (TikTok)
  - `vk_mention`, `vk_comment`
  - `youtube_comment`
  - `instagram_post`, `instagram_comment`
  - `twitter_tweet`, `twitter_reply`
  - `discord_message`
  - `release`, `hotfix`, `marketing_campaign`, `community_event`, `pr_publication` (—Å–æ–±—ã—Ç–∏—è –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
- `user_id` (string, nullable) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `content_id` (string, nullable) - ID –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø–æ—Å—Ç–∞/–≤–∏–¥–µ–æ)
- `value` (number, nullable) - —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–ª–∞–π–∫–∏, score –∏ —Ç.–¥.)
- `properties` (jsonb) - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–æ–±—ã—Ç–∏—è:
  - `title`, `text`, `comment_text` - —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - `author`, `author_name` - –∞–≤—Ç–æ—Ä
  - `score`, `like_count`, `likes` - –º–µ—Ç—Ä–∏–∫–∏ –ª–∞–π–∫–æ–≤
  - `view_count`, `views`, `impressions` - –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
  - `sentiment` - —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (`positive`, `negative`, `neutral`)
  - `url`, `permalink` - —Å—Å—ã–ª–∫–∏
  - –ò –¥—Ä—É–≥–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è
- `external_event_id` (string, nullable) - –≤–Ω–µ—à–Ω–∏–π ID —Å–æ–±—ã—Ç–∏—è

### 2. `metric_snapshots` - –°–Ω–∏–º–∫–∏ –º–µ—Ç—Ä–∏–∫

–•—Ä–∞–Ω–∏—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –¥–Ω—è–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `snapshot_id` (string) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–Ω–∏–º–∫–∞
- `snapshot_date` (date) - –¥–∞—Ç–∞ —Å–Ω–∏–º–∫–∞
- `snapshot_timestamp` (timestamp) - –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–º–∫–∞
- `platform` (string) - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- `metrics` (jsonb) - –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏:
  - `likes`, `like_count`
  - `shares`, `retweets`, `reposts`
  - `reach`, `views`, `view_count`
  - `dau`, `revenue`, `retention` (–¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫)

### 3. `strategic_briefs` - –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –±—Ä–∏—Ñ–∏–Ω–≥–∏

–•—Ä–∞–Ω–∏—Ç AI-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –±—Ä–∏—Ñ–∏–Ω–≥–∏:

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `brief_text` (text) - —Ç–µ–∫—Å—Ç –±—Ä–∏—Ñ–∏–Ω–≥–∞
- `date` (date) - –¥–∞—Ç–∞ –±—Ä–∏—Ñ–∏–Ω–≥–∞
- `platform_filter` (string) - —Ñ–∏–ª—å—Ç—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (`all`, `Reddit`, `Tiktok` –∏ —Ç.–¥.)
- `metrics_summary` (jsonb) - —Å–≤–æ–¥–∫–∞ –º–µ—Ç—Ä–∏–∫
- `created_at` (timestamp) - –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è

## üìä –ö–∞–∫ –ø—Ä–æ–µ–∫—Ç –ø–∞—Ä—Å–∏—Ç –¥–∞–Ω–Ω—ã–µ

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** (`App.tsx`):
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
   - –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ ‚Üí –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
   - –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –ë–î –ø—É—Å—Ç–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è mock –¥–∞–Ω–Ω—ã–µ

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫** (`supabaseService.getSnapshotMetrics()`):
   - –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ `metric_snapshots`
   - –ï—Å–ª–∏ snapshots –ø—É—Å—Ç—ã–µ –∏–ª–∏ –≤—Å–µ –Ω—É–ª–∏ ‚Üí –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ `events`
   - –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ –¥–Ω—è–º –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç: dailyMentions, engagementScore, sentimentPercent, likes, reach –∏ —Ç.–¥.

3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤** (`supabaseService.getComments()`):
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏–∑ `events` (–∏—Å–∫–ª—é—á–∞—è —Å–æ–±—ã—Ç–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
   - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç `Comment` —Å –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–µ–π –∞–≤—Ç–æ—Ä–æ–≤
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (sentiment) –∏–∑ –ø–æ–ª—è `properties.sentiment` –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç

4. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π** (`supabaseService.getActivities()`):
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: `release`, `hotfix`, `marketing_campaign`, `community_event`, `pr_publication`
   - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç `ProductionActivity`

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Supabase)
- –ú–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "Refresh" –≤ Header

## üìù –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/collectSocialData.ts` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Supabase.

–ó–∞–ø—É—Å–∫:
```bash
npm run collect-data
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã—Ö
node test-supabase.js

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (RLS)
node test-permissions.js
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **RLS (Row Level Security)**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Supabase –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ç–∞–±–ª–∏—Ü `events`, `metric_snapshots`, `strategic_briefs`

2. **–ò–Ω–¥–µ–∫—Å—ã**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞:
   - `events.event_timestamp`
   - `events.platform`
   - `events.event_type`
   - `metric_snapshots.snapshot_date`

3. **–§—É–Ω–∫—Ü–∏—è RPC**: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `get_daily_metrics`, –µ—ë –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤ Supabase:
   ```sql
   CREATE OR REPLACE FUNCTION get_daily_metrics(start_date timestamp, days_count int)
   RETURNS TABLE(...) AS $$
   -- –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
   $$ LANGUAGE plpgsql;
   ```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   - `‚úÖ Supabase client initialized` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
   - `üì° Loading data from Supabase...` - –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î
   - `‚úÖ Supabase data loaded` - –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

3. –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "Source: Supabase (Live)" –≤–º–µ—Å—Ç–æ "Demo Data"

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Supabase](https://supabase.com/docs)
- [Supabase JavaScript Client](https://supabase.com/docs/reference/javascript/introduction)

